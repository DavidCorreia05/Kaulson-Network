<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kaulson Network | Oficial</title>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getFirestore, doc, setDoc, onSnapshot, collection, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

      // Configura칞칫es do teu projeto que vi na imagem
      const firebaseConfig = {
        apiKey: "AIzaSyA51GrwiUnvZVbv4Cvz-M", 
        authDomain: "kaulson-network.firebaseapp.com",
        projectId: "kaulson-network",
        storageBucket: "kaulson-network.firebasestorage.app",
        messagingSenderId: "756558405529",
        appId: "1:756558405529:web:999f6fa"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Fun칞칚o para enviar dados para o Ranking Global
      window.atualizarRanking = async (nomeUsuario, valorSaldo) => {
        try {
          await setDoc(doc(db, "ranking", nomeUsuario), {
            usuario: nomeUsuario,
            saldo: valorSaldo,
            ultimaAtividade: Date.now()
          }, { merge: true });
        } catch (e) { console.error("Erro ao salvar:", e); }
      };

      // Fun칞칚o para ler o Ranking em tempo real
      const q = query(collection(db, "ranking"), orderBy("saldo", "desc"), limit(10));
      onSnapshot(q, (snapshot) => {
        const rankingDiv = document.getElementById('listaRanking');
        rankingDiv.innerHTML = "";
        snapshot.forEach((doc) => {
          const item = doc.data();
          rankingDiv.innerHTML += `
            <div style="display:flex; justify-content:space-between; padding:8px; border-bottom:1px solid #222;">
                <span style="color:#fff;">${item.usuario}</span>
                <span style="color:#d4af37; font-weight:bold;">${item.saldo.toFixed(5)} $KSON</span>
            </div>`;
        });
      });
    </script>

    <style>
        :root { --gold: #d4af37; --black: #000; --dark-gray: #111; }
        body { background-color: var(--black); color: white; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; }
        
        .header { width: 100%; padding: 25px 0; text-align: center; background: var(--dark-gray); border-bottom: 2px solid #222; }
        .balance-title { font-size: 12px; color: #888; letter-spacing: 2px; margin-bottom: 5px; }
        .balance-value { font-size: 42px; font-weight: bold; color: var(--gold); text-shadow: 0 0 10px rgba(212,175,55,0.3); }

        .mine-section { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 0; }
        .k-btn { 
            width: 160px; height: 160px; border-radius: 50%; border: 8px solid #222;
            background: radial-gradient(circle, #f9df7b, #d4af37);
            font-size: 70px; font-weight: bold; color: #111; cursor: pointer;
            box-shadow: 0 0 30px rgba(212,175,55,0.2); transition: 0.2s;
        }
        .k-btn:active { transform: scale(0.95); box-shadow: 0 0 10px rgba(212,175,55,0.5); }

        .card { width: 90%; max-width: 350px; background: var(--dark-gray); border-radius: 15px; padding: 20px; margin-bottom: 20px; border: 1px solid #222; }
        .card-title { font-size: 16px; font-weight: bold; margin-bottom: 15px; color: var(--gold); border-bottom: 1px solid #333; padding-bottom: 5px; }
        
        .btn-action { background: var(--gold); color: black; border: none; width: 100%; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; }

        .footer-nav { position: fixed; bottom: 0; width: 100%; height: 60px; background: #000; border-top: 1px solid #222; display: flex; justify-content: space-around; align-items: center; font-size: 20px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="balance-title">SALDO KAULSON NETWORK</div>
        <div class="balance-value" id="visor">0.00000</div>
    </div>

    <div class="mine-section">
        <button class="k-btn" id="mainButton">K</button>
        <p id="statusTxt" style="color: #555; margin-top: 15px; font-weight: bold;">TOCA PARA MINERAR</p>
    </div>

    <div class="card">
        <div class="card-title">游끥 RANKING GLOBAL</div>
        <div id="listaRanking">Carregando mineradores...</div>
    </div>

    <div class="card">
        <div class="card-title">游논 CONVITES (+25%)</div>
        <button class="btn-action" onclick="copiarLink()">COPIAR MEU LINK</button>
    </div>

    <div style="height: 80px;"></div> <div class="footer-nav">
        <span>游</span><span>游늵</span><span>游논</span><span>丘뙖잺</span>
    </div>

    <script>
        // L칩gica do Saldo e Minera칞칚o
        let saldo = parseFloat(localStorage.getItem('kson_storage_bal')) || 0.00000;
        const visor = document.getElementById('visor');
        const statusTxt = document.getElementById('statusTxt');
        
        visor.innerText = saldo.toFixed(5);

        document.getElementById('mainButton').onclick = () => {
            saldo += 0.00055; // Velocidade de minera칞칚o
            visor.innerText = saldo.toFixed(5);
            
            // 1. Salva no telem칩vel (Base de Dados Local)
            localStorage.setItem('kson_storage_bal', saldo);
            
            // 2. Envia para o Ranking (Base de Dados Global)
            if (window.atualizarRanking) {
                window.atualizarRanking("Minerador_Top", saldo);
                statusTxt.innerText = "MINERANDO EM TEMPO REAL...";
                statusTxt.style.color = "#00ff00";
            }
        };

        function copiarLink() {
            const meuLink = "https://kaulson.vercel.app/?ref=KAULSON" + Math.floor(Math.random() * 9999);
            navigator.clipboard.writeText(meuLink);
            alert("Link de Convite copiado! Partilha para ganhares b칩nus.");
        }
    </script>
</body>
</html>
